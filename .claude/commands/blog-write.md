# 블로그 포스트 작성

새 블로그 포스트를 작성하는 대화형 워크플로우를 실행합니다.

## 트리거
- `/blog-write [주제 또는 메모]` 명령으로 실행
- "블로그 써줘", "포스트 작성", "글 써줘" 등의 표현

## 워크플로우

### 1단계: 주제 분석 및 구조 설계

사용자의 입력(`$ARGUMENTS`)을 분석하여 포스트 구조를 제안한다.

**프로젝트 링크가 제공된 경우:**

- GitHub 등 프로젝트 저장소를 `gh` CLI 또는 웹으로 분석
- 코드를 그대로 노출하지 않고, 아키텍처/기술 선택/문제 해결 과정 등 블로그 독자에게 유익한 정보를 추출
- 분석 관점: 기술 스택, 설계 결정 이유, 삽질 경험, 배운 점, 다른 개발자에게 도움될 팁

**이전 포스트 확인:**

- `_posts/` 폴더에서 관련 주제의 기존 포스트를 검색
- 연관 포스트가 있으면 본문에서 자연스럽게 링크 연결
- 시리즈물이 될 수 있으면 연속성 유지
- 글쓰기 어투와 구조를 기존 포스트와 일관되게 맞춤

**확인 사항:**

- 주제/경험의 핵심 내용
- 카테고리: Development, AI, DevDiary 등 기존 카테고리에서 선택
- 기술 블로그 vs 일상 블로그 구분

**제안 형식:**
```
제목안: [2-3개 후보]
카테고리: [추천]
태그: [5-7개]
구조:
  1. 도입 (문제/상황)
  2. 본문 (과정/해결)
  3. 결론 (인사이트)
이미지 계획: [필요 이미지 목록 + 소스 유형]
```

사용자 승인 후 다음 단계로 진행한다.

### 2단계: 이미지 수집 및 최적화

이미지 소스별 처리:

**a. PC 화면 캡처:**
- `mcp__screenshot__capture` 도구 사용
- region: 'left' / 'right' / 'full' 선택

**b. AI 생성 이미지:**
- hero 이미지용 상세 프롬프트를 영문으로 작성하여 제공
- 프롬프트 형식: "Create a [스타일] illustration showing [주제]. [세부사항]. Style: modern, tech blog hero image, 16:9 aspect ratio, vibrant colors"
- 사용자가 외부 AI 도구(Midjourney, DALL-E, Imagen 등)로 생성

**c. 사용자 사진:**
- 프로젝트 루트의 `dropbox/` 폴더에서 가져오기
- 사용자에게 "dropbox/ 폴더에 사진을 넣어주세요" 안내

**d. 웹사이트 캡처:**
- Playwright MCP 활용: `npx playwright screenshot <URL> <출력파일>`
- 전체 페이지: `--full-page` 옵션

**모든 이미지 최적화:**
```bash
./scripts/optimize-image.sh <입력파일> <포스트-slug>
```
- 최대 너비 1200px, 최대 용량 300KB
- 결과: `assets/images/posts/[slug]/` 에 저장

**필수:** 모든 포스트에 최소 1개 이미지 (hero 이미지)

### 3단계: 한국어 초안 작성

**글쓰기 스타일 규칙:**
- 어투: 구어체 + 전문 용어 혼합 ("~더라", "~했다", "~인 거다")
- 이모지 소제목: 🤦‍♂️ 문제/실수, 🔧 해결/구현, 💡 인사이트/발견, 🎯 결론, 📈 결과, 🚀 시작/도입
- 서사 구조: 문제 상황 → 삽질/시도 과정 → 해결책 → 배운 점/결론
- 코드 블록: 실제 동작 코드 + 주석, 잘못된 코드 vs 올바른 코드 비교
- 독자 소통: 마무리에 "비슷한 경험 있으신 분", "댓글로 공유해주세요"
- P.S.: 후기나 추가 인사이트 첨부
- 제목: SEO + 호기심 유발 ("~했더니", "현실은 다르더라", "200% 활용기")
- **어투 학습**: 기존 게시글의 어투를 지속적으로 학습하여 메모리에 저장하고 활용

**파일 생성:**
- 파일명: `_posts/YYYY-MM-DD-[slug].md`
- Front Matter:
```yaml
---
layout: post
title: "[제목]"
date: YYYY-MM-DD HH:MM:00 +0900
categories: [카테고리1, 카테고리2]
tags: [태그1, 태그2, ...]
author: "Kevin Park"
lang: ko
excerpt: "[1-2문장 요약]"
image: "/assets/images/posts/[slug]/hero.png"
mermaid: true  # Mermaid 사용 시에만
---
```

사용자 리뷰 후 수정사항을 반영한다.

### 4단계: 다국어 자동 번역

한국어 초안이 확정되면 **별도 요청 없이 자동으로** 영어/일본어 버전을 작성한다:
- `_posts/YYYY-MM-DD-[slug]-en.md` (영어: 전문적이고 간결한 어투)
- `_posts/YYYY-MM-DD-[slug]-ja.md` (일본어: 정중한 경어체 ~です/~ます)

단순 번역이 아닌, 해당 언어권 독자에게 자연스러운 표현으로 작성한다. 항상 3개 언어 파일이 세트로 생성되어야 한다.

### 5단계: 발행

사용자가 발행을 요청하면:
1. 모든 파일 확인 (ko, en, ja + 이미지)
2. Jekyll 로컬 빌드 테스트: `bundle exec jekyll build`
3. 사용자에게 커밋 요청 안내 (`/git-commit` 사용)
