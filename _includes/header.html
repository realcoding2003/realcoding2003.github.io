{% assign current_lang = page.lang | default: site.default_lang %}
{% assign lang_data = site.data[current_lang] %}

<header class="site-header">
    <div class="container">
        <div class="header-content">
            <!-- 로고/브랜드 -->
            <div class="site-brand">
                {% if current_lang == site.default_lang %}
                    <a href="{{ '/' | relative_url }}" class="brand-link">
                {% else %}
                    <a href="{{ '/' | append: current_lang | append: '/' | relative_url }}" class="brand-link">
                {% endif %}
                    <span class="brand-text">{{ lang_data.site.title }}</span>
                </a>
            </div>

            <!-- 네비게이션 -->
            <nav class="main-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        {% if current_lang == site.default_lang %}
                            <a href="{{ '/' | relative_url }}" class="nav-link {% if page.url == '/' %}active{% endif %}">
                        {% else %}
                            <a href="{{ '/' | append: current_lang | append: '/' | relative_url }}" class="nav-link {% if page.url contains 'index' %}active{% endif %}">
                        {% endif %}
                            {{ lang_data.nav.home }}
                        </a>
                    </li>
                    <li class="nav-item">
                        {% if current_lang == site.default_lang %}
                            <a href="{{ '/archive' | relative_url }}" class="nav-link {% if page.url == '/archive/' %}active{% endif %}">
                        {% else %}
                            <a href="{{ '/' | append: current_lang | append: '/archive' | relative_url }}" class="nav-link {% if page.url contains 'archive' %}active{% endif %}">
                        {% endif %}
                            {{ lang_data.nav.archive }}
                        </a>
                    </li>
                    <li class="nav-item">
                        {% if current_lang == site.default_lang %}
                            <a href="{{ '/about' | relative_url }}" class="nav-link {% if page.url == '/about/' %}active{% endif %}">
                        {% else %}
                            <a href="{{ '/' | append: current_lang | append: '/about' | relative_url }}" class="nav-link {% if page.url contains 'about' %}active{% endif %}">
                        {% endif %}
                            {{ lang_data.nav.about }}
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- 유틸리티 -->
            <div class="header-utilities">
                <!-- 언어 전환 (인라인) -->
                <div class="language-switcher">
                    {% for lang in site.languages %}
                        {% if lang == site.default_lang %}
                            {% assign lang_url = '/' %}
                        {% else %}
                            {% assign lang_url = '/' | append: lang | append: '/' %}
                        {% endif %}
                        <a href="{{ lang_url | relative_url }}" class="lang-btn {% if lang == current_lang %}active{% endif %}">
                            {{ lang | upcase }}
                        </a>
                    {% endfor %}
                </div>

                <!-- 다크모드 토글 -->
                <button class="theme-toggle" id="themeToggle" title="{{ lang_data.ui.toggle_dark_mode | default: 'Toggle Dark Mode' }}" aria-label="{{ lang_data.ui.toggle_dark_mode | default: 'Toggle Dark Mode' }}">
                    ☀
                </button>
            </div>

            <!-- 모바일 메뉴 -->
            <button class="mobile-menu-toggle" aria-label="{{ lang_data.ui.menu_toggle }}">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </div>
</header>
