---
layout: post
title: "オンプレミスからクラウドへ - サーバー移行を先延ばしにし続ける開発者の告白"
date: 2020-04-20 09:00:00 +0900
categories: [Development, DevOps]
tags: [サーバー, クラウド, AWS, オンプレミス, IDC, マイグレーション]
author: "Kevin Park"
lang: ja
excerpt: "新しいプロジェクトはクラウド、既存のものはIDCそのまま。毎回移行しようと思いつつ応急処置だけして先延ばしにしている。"
---

# オンプレミスからクラウドへの過渡期

## 現状

最近、サーバーの運用方法が完全に二分されています。

新しいプロジェクトはクラウド（AWSなど）に載せていますが、既存のものはIDCに設置した物理サーバーでそのまま稼働しています。移行するのは簡単ではありません。

## サーバーが老朽化している

問題は、既存のサーバーがどんどん古くなっていることです。

ハードディスクに問題が起きるたびに心臓が止まりそうになります。その瞬間だけは「今度こそ絶対に移行する」と固く決意するのですが...応急処置が終わると、また計画を後回しにしてしまいます。

これ、ダイエット計画とまったく同じですね。「月曜日から始める」と言い続けて毎週月曜日が過ぎていく感じ。

## クラウドのメリットは明確

正直、クラウドを使ってみると確かに便利です。

- ハードウェアの心配がない
- スケーリングが自由
- バックアップが自動
- サーバールームに行く必要がない

特にIDCに物理サーバーを置いていると、深夜に障害の電話が来るんじゃないかと常に不安ですが、クラウドならそのストレスが大幅に軽減されます。

## それでも移行できない理由

移行しないのではなく、できないのです。

稼働中のサービスをダウンタイムなしで移行するのは、想像以上にリスクが高いです。DBマイグレーション、DNS変更、SSL証明書...一つでも間違えるとサービスが止まります。本番環境なので「ちょっと止めますね」とも言えません。

結局、開発者の本能が発動します：「動いているものには触るな。」

## 現実的な計画

すべてを一度に移行するのは無理なので、こういうアプローチを考えています。

1. 新規プロジェクトは100%クラウド
2. 既存サーバーに障害が発生した時をチャンスに移行
3. トラフィックの少ないサービスから順次移行

いつか全部移行できるでしょう...たぶん...おそらく？
